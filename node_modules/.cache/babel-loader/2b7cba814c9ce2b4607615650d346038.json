{"ast":null,"code":"import _assertThisInitialized from\"/Users/xiongjieyi/repositories/jr-assessment-jing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"/Users/xiongjieyi/repositories/jr-assessment-jing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/xiongjieyi/repositories/jr-assessment-jing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/xiongjieyi/repositories/jr-assessment-jing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/xiongjieyi/repositories/jr-assessment-jing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import\"../styles.css\";import{getCollectionsAsync}from\"../api/data.js\";import{getAssetsByCollectionAsync}from\"../api/data.js\";import{getAssetByIdAsync}from\"../api/data.js\";import{faJoint}from\"@fortawesome/free-solid-svg-icons\";var CollectionsInfo=/*#__PURE__*/function(_React$Component){_inherits(CollectionsInfo,_React$Component);var _super=_createSuper(CollectionsInfo);function CollectionsInfo(props){var _this;_classCallCheck(this,CollectionsInfo);_this=_super.call(this,props);_this.state={collections:[]};return _this;}_createClass(CollectionsInfo,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;getCollectionsAsync().then(function(data){_this2.setState({collections:data});data.forEach(function(collection){_this2.props.setDefaultMasterId(collection.id,collection.masterAssetId);});});}},{key:\"getRecurName\",value:function getRecurName(tag){if('subTag'in tag===false){return tag.name;}return\"\".concat(tag.name,\" > \").concat(this.getRecurName(tag.subTag));}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"collectionsInfo\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Please select one collection\"),this.state.collections.map(function(collection){return/*#__PURE__*/React.createElement(CollectionCard,{key:collection.id,ID:collection.id,name:collection.name,tag:_this3.getRecurName(collection.tags),setDataFromCollection:_this3.props.setDataFromCollection,masterId:_this3.props.masterIdObj[collection.id]||collection.masterAssetId});}));}}]);return CollectionsInfo;}(React.Component);export{CollectionsInfo as default};export var CollectionCard=/*#__PURE__*/function(_React$Component2){_inherits(CollectionCard,_React$Component2);var _super2=_createSuper(CollectionCard);function CollectionCard(props){var _this4;_classCallCheck(this,CollectionCard);_this4=_super2.call(this,props);_this4.updateCollectionIcon=function(masterId){getAssetByIdAsync(masterId).then(function(data){_this4.setState({masterPath:\"https://jing-chu.github.io/jr-assessment-jing/images/\"+data.path});});};_this4.handleClick=function(e){e.preventDefault();var collectionId=_this4.props.ID;getAssetsByCollectionAsync(collectionId).then(function(data){_this4.props.setDataFromCollection(data);});};_this4.state={masterPath:\"\"};_this4.handleClick=_this4.handleClick.bind(_assertThisInitialized(_this4));return _this4;}_createClass(CollectionCard,[{key:\"componentDidMount\",value:function componentDidMount(){this.updateCollectionIcon(this.props.masterId);}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(props){this.updateCollectionIcon(props.masterId);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,this.props.tag),/*#__PURE__*/React.createElement(\"div\",{className:\"collection-card\"},/*#__PURE__*/React.createElement(\"img\",{className:\"collection-img\",src:this.state.masterPath,alt:this.props.name,onClick:this.handleClick,width:\"150\",height:\"150\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"collection-detail\"},/*#__PURE__*/React.createElement(\"p\",{className:\"collection-select\",onClick:this.handleClick},this.props.name))));}}]);return CollectionCard;}(React.Component);","map":{"version":3,"sources":["/Users/xiongjieyi/repositories/jr-assessment-jing/src/components/CollectionsInfo.js"],"names":["React","getCollectionsAsync","getAssetsByCollectionAsync","getAssetByIdAsync","faJoint","CollectionsInfo","props","state","collections","then","data","setState","forEach","collection","setDefaultMasterId","id","masterAssetId","tag","name","getRecurName","subTag","map","tags","setDataFromCollection","masterIdObj","Component","CollectionCard","updateCollectionIcon","masterId","masterPath","path","handleClick","e","preventDefault","collectionId","ID","bind"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport \"../styles.css\"\nimport { getCollectionsAsync } from \"../api/data.js\"\nimport { getAssetsByCollectionAsync } from \"../api/data.js\"\nimport { getAssetByIdAsync } from \"../api/data.js\"\nimport { faJoint } from \"@fortawesome/free-solid-svg-icons\"\n\n\nexport default class CollectionsInfo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collections: []\n    }\n  }\n\n  componentDidMount() {\n    getCollectionsAsync().then((data) => {\n      this.setState({\n        collections: data\n      })\n      data.forEach(collection => {\n        this.props.setDefaultMasterId(collection.id, collection.masterAssetId)\n      })\n    })\n  }\n\n  getRecurName(tag){\n    if('subTag' in tag === false){\n      return tag.name\n    }\n    return `${tag.name} > ${this.getRecurName(tag.subTag)}`\n  }\n\n  render() {\n    return (\n      <div className=\"collectionsInfo\">\n        <h1>Please select one collection</h1>\n        {this.state.collections.map(collection =>\n          <CollectionCard\n            key={collection.id}\n            ID={collection.id}\n            name={collection.name}\n            tag={this.getRecurName(collection.tags)}\n            setDataFromCollection={this.props.setDataFromCollection}\n            masterId={this.props.masterIdObj[collection.id] || collection.masterAssetId}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport class CollectionCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      masterPath: \"\"\n    }\n    this.handleClick = this.handleClick.bind(this)\n  }\n\n  updateCollectionIcon = (masterId) => {\n    getAssetByIdAsync(masterId).then((data) => {\n      this.setState({ masterPath: \"https://jing-chu.github.io/jr-assessment-jing/images/\" + data.path })\n    })\n  }\n\n  handleClick = (e) => {\n    e.preventDefault()\n    let collectionId = this.props.ID\n    getAssetsByCollectionAsync(collectionId).then((data) => {\n      this.props.setDataFromCollection(data)\n    })\n  }\n\n  componentDidMount() {\n    this.updateCollectionIcon(this.props.masterId)\n  }\n  componentWillReceiveProps(props) {\n    this.updateCollectionIcon(props.masterId)\n  }\n\n  render() {\n    return (\n      <div>\n        <p >{this.props.tag}</p>\n        <div className=\"collection-card\">\n          <img className=\"collection-img\" src={this.state.masterPath} alt={this.props.name} onClick={this.handleClick} width=\"150\" height=\"150\" />\n          <div className=\"collection-detail\">\n            <p className=\"collection-select\" onClick={this.handleClick}>\n              {this.props.name}\n            </p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}